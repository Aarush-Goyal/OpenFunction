
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: servings.core.openfunction.io
spec:
  group: core.openfunction.io
  names:
    kind: Serving
    listKind: ServingList
    plural: servings
    shortNames:
    - fs
    singular: serving
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Serving is the Schema for the servings API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ServingSpec defines the desired state of Serving
            properties:
              image:
                description: Function image name
                type: string
              openFuncAsync:
                description: Parameters of OpenFuncAsync runtime.
                properties:
                  dapr:
                    description: Configrations of dapr.
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: Annotations for dapr
                        type: object
                      components:
                        description: Components of dapr
                        items:
                          properties:
                            ignoreErrors:
                              type: boolean
                            initTimeout:
                              type: string
                            metadata:
                              items:
                                description: MetadataItem is a name/value pair for
                                  a metadata
                                properties:
                                  name:
                                    type: string
                                  secretKeyRef:
                                    description: SecretKeyRef is a reference to a
                                      secret holding the value for the metadata item.
                                      Name is the secret name, and key is the field
                                      in the secret.
                                    properties:
                                      key:
                                        type: string
                                      name:
                                        type: string
                                    required:
                                    - key
                                    - name
                                    type: object
                                  value:
                                    description: DynamicValue is a dynamic value struct
                                      for the component.metadata pair value
                                    type: object
                                    x-kubernetes-preserve-unknown-fields: true
                                required:
                                - name
                                type: object
                              type: array
                            name:
                              type: string
                            type:
                              type: string
                            version:
                              type: string
                          required:
                          - metadata
                          - name
                          - type
                          - version
                          type: object
                        type: array
                      input:
                        description: Function input from bindings data
                        properties:
                          name:
                            description: Input name, the name of Dapr component. The
                              component must be created in k8s cluster, or defined
                              in the `components` or `subscriptions`.
                            type: string
                          pattern:
                            description: Input serving listening path. if the type
                              is bindings, pattern is the name of component. if the
                              type is pubsub, pattern is the topic of subscription.
                              If the type is invoke, pattern is the name of function.
                            type: string
                          type:
                            description: 'Input type, known values are bindings, pubsub,
                              invoke. bindings: Indicates that the input is the Dapr
                              bindings component. pubsub: Indicates that the input
                              is the Dapr pubsub component. invoke: Indicates that
                              the input is the Dapr service invocation component.'
                            type: string
                        required:
                        - name
                        - pattern
                        - type
                        type: object
                      output:
                        description: Function output to bindings data
                        items:
                          properties:
                            name:
                              description: Output name, the name of Dapr component.
                                The component must be created in k8s cluster, or defined
                                in the `components` or `subscriptions`.
                              type: string
                            params:
                              additionalProperties:
                                type: string
                              description: Parameters for output.
                              type: object
                            pattern:
                              description: Output serving listening path. if the type
                                is bindings, pattern is the name of component. if
                                the type is pubsub, pattern is the topic of subscription.
                                If the type is invoke, pattern is the name of function.
                              type: string
                            type:
                              description: 'Output type, known values are bindings,
                                pubsub, invoke. bindings: Indicates that the input
                                is the Dapr bindings component. pubsub: Indicates
                                that the input is the Dapr pubsub component. invoke:
                                Indicates that the input is the Dapr service invocation
                                component.'
                              type: string
                          required:
                          - name
                          - pattern
                          - type
                          type: object
                        type: array
                      protocol:
                        description: Function serving kind, known values are HTTP,
                          gRPC default value is http.
                        type: string
                      subscriptions:
                        description: Subscriptions of dapr
                        items:
                          properties:
                            name:
                              type: string
                            pubsubname:
                              type: string
                            route:
                              type: string
                            scopes:
                              items:
                                type: string
                              type: array
                            topic:
                              type: string
                          required:
                          - name
                          - pubsubname
                          - route
                          - topic
                          type: object
                        type: array
                    type: object
                  keda:
                    description: Configrations of keda.
                    properties:
                      scaledJob:
                        properties:
                          failedJobsHistoryLimit:
                            format: int32
                            type: integer
                          maxReplicaCount:
                            format: int32
                            type: integer
                          pollingInterval:
                            format: int32
                            type: integer
                          scalingStrategy:
                            description: ScalingStrategy defines the strategy of Scaling
                            properties:
                              customScalingQueueLengthDeduction:
                                format: int32
                                type: integer
                              customScalingRunningJobPercentage:
                                type: string
                              strategy:
                                type: string
                            type: object
                          successfulJobsHistoryLimit:
                            format: int32
                            type: integer
                          triggers:
                            items:
                              description: ScaleTriggers reference the scaler that
                                will be used
                              properties:
                                authenticationRef:
                                  description: ScaledObjectAuthRef points to the TriggerAuthentication
                                    or ClusterTriggerAuthentication object that is
                                    used to authenticate the scaler with the environment
                                  properties:
                                    kind:
                                      description: Kind of the resource being referred
                                        to. Defaults to TriggerAuthentication.
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - name
                                  type: object
                                metadata:
                                  additionalProperties:
                                    type: string
                                  type: object
                                name:
                                  type: string
                                type:
                                  type: string
                              required:
                              - metadata
                              - type
                              type: object
                            type: array
                        required:
                        - triggers
                        type: object
                      scaledObject:
                        properties:
                          advanced:
                            description: AdvancedConfig specifies advance scaling
                              options
                            properties:
                              horizontalPodAutoscalerConfig:
                                description: HorizontalPodAutoscalerConfig specifies
                                  horizontal scale config
                                properties:
                                  behavior:
                                    description: HorizontalPodAutoscalerBehavior configures
                                      the scaling behavior of the target in both Up
                                      and Down directions (scaleUp and scaleDown fields
                                      respectively).
                                    properties:
                                      scaleDown:
                                        description: scaleDown is scaling policy for
                                          scaling Down. If not set, the default value
                                          is to allow to scale down to minReplicas
                                          pods, with a 300 second stabilization window
                                          (i.e., the highest recommendation for the
                                          last 300sec is used).
                                        properties:
                                          policies:
                                            description: policies is a list of potential
                                              scaling polices which can be used during
                                              scaling. At least one policy must be
                                              specified, otherwise the HPAScalingRules
                                              will be discarded as invalid
                                            items:
                                              description: HPAScalingPolicy is a single
                                                policy which must hold true for a
                                                specified past interval.
                                              properties:
                                                periodSeconds:
                                                  description: PeriodSeconds specifies
                                                    the window of time for which the
                                                    policy should hold true. PeriodSeconds
                                                    must be greater than zero and
                                                    less than or equal to 1800 (30
                                                    min).
                                                  format: int32
                                                  type: integer
                                                type:
                                                  description: Type is used to specify
                                                    the scaling policy.
                                                  type: string
                                                value:
                                                  description: Value contains the
                                                    amount of change which is permitted
                                                    by the policy. It must be greater
                                                    than zero
                                                  format: int32
                                                  type: integer
                                              required:
                                              - periodSeconds
                                              - type
                                              - value
                                              type: object
                                            type: array
                                          selectPolicy:
                                            description: selectPolicy is used to specify
                                              which policy should be used. If not
                                              set, the default value MaxPolicySelect
                                              is used.
                                            type: string
                                          stabilizationWindowSeconds:
                                            description: 'StabilizationWindowSeconds
                                              is the number of seconds for which past
                                              recommendations should be considered
                                              while scaling up or scaling down. StabilizationWindowSeconds
                                              must be greater than or equal to zero
                                              and less than or equal to 3600 (one
                                              hour). If not set, use the default values:
                                              - For scale up: 0 (i.e. no stabilization
                                              is done). - For scale down: 300 (i.e.
                                              the stabilization window is 300 seconds
                                              long).'
                                            format: int32
                                            type: integer
                                        type: object
                                      scaleUp:
                                        description: 'scaleUp is scaling policy for
                                          scaling Up. If not set, the default value
                                          is the higher of:   * increase no more than
                                          4 pods per 60 seconds   * double the number
                                          of pods per 60 seconds No stabilization
                                          is used.'
                                        properties:
                                          policies:
                                            description: policies is a list of potential
                                              scaling polices which can be used during
                                              scaling. At least one policy must be
                                              specified, otherwise the HPAScalingRules
                                              will be discarded as invalid
                                            items:
                                              description: HPAScalingPolicy is a single
                                                policy which must hold true for a
                                                specified past interval.
                                              properties:
                                                periodSeconds:
                                                  description: PeriodSeconds specifies
                                                    the window of time for which the
                                                    policy should hold true. PeriodSeconds
                                                    must be greater than zero and
                                                    less than or equal to 1800 (30
                                                    min).
                                                  format: int32
                                                  type: integer
                                                type:
                                                  description: Type is used to specify
                                                    the scaling policy.
                                                  type: string
                                                value:
                                                  description: Value contains the
                                                    amount of change which is permitted
                                                    by the policy. It must be greater
                                                    than zero
                                                  format: int32
                                                  type: integer
                                              required:
                                              - periodSeconds
                                              - type
                                              - value
                                              type: object
                                            type: array
                                          selectPolicy:
                                            description: selectPolicy is used to specify
                                              which policy should be used. If not
                                              set, the default value MaxPolicySelect
                                              is used.
                                            type: string
                                          stabilizationWindowSeconds:
                                            description: 'StabilizationWindowSeconds
                                              is the number of seconds for which past
                                              recommendations should be considered
                                              while scaling up or scaling down. StabilizationWindowSeconds
                                              must be greater than or equal to zero
                                              and less than or equal to 3600 (one
                                              hour). If not set, use the default values:
                                              - For scale up: 0 (i.e. no stabilization
                                              is done). - For scale down: 300 (i.e.
                                              the stabilization window is 300 seconds
                                              long).'
                                            format: int32
                                            type: integer
                                        type: object
                                    type: object
                                type: object
                              restoreToOriginalReplicaCount:
                                type: boolean
                            type: object
                          cooldownPeriod:
                            format: int32
                            type: integer
                          maxReplicaCount:
                            format: int32
                            type: integer
                          minReplicaCount:
                            format: int32
                            type: integer
                          pollingInterval:
                            format: int32
                            type: integer
                          triggers:
                            items:
                              description: ScaleTriggers reference the scaler that
                                will be used
                              properties:
                                authenticationRef:
                                  description: ScaledObjectAuthRef points to the TriggerAuthentication
                                    or ClusterTriggerAuthentication object that is
                                    used to authenticate the scaler with the environment
                                  properties:
                                    kind:
                                      description: Kind of the resource being referred
                                        to. Defaults to TriggerAuthentication.
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - name
                                  type: object
                                metadata:
                                  additionalProperties:
                                    type: string
                                  type: object
                                name:
                                  type: string
                                type:
                                  type: string
                              required:
                              - metadata
                              - type
                              type: object
                            type: array
                          workloadType:
                            description: How to run the function, known values are
                              Deployment or StatefulSet, default is Deployment.
                            type: string
                        required:
                        - triggers
                        type: object
                    type: object
                type: object
              params:
                additionalProperties:
                  type: string
                description: Parameters to pass to the serving. All parameters will
                  be injected into the pod as environment variables. Function code
                  can use these parameters by getting environment variables
                type: object
              port:
                description: The port on which the function will be invoked
                format: int32
                type: integer
              runtime:
                description: The backend runtime to run a function, for example Knative
                type: string
              version:
                description: Function version in format like v1.0.0
                type: string
            required:
            - image
            type: object
          status:
            description: ServingStatus defines the observed state of Serving
            properties:
              phase:
                type: string
              state:
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
